<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>전세 vs 월세 비교 계산기</title>
  <style>
    :root{
      --bg:#0b1020;
      --card:#121a33;
      --muted:#91a0c7;
      --text:#eaf0ff;
      --border:rgba(255,255,255,.10);
      --good:#3ddc97;
      --bad:#ff6b6b;
      --warn:#ffd166;
      --shadow: 0 12px 30px rgba(0,0,0,.35);
      --radius:18px;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Apple SD Gothic Neo", "Noto Sans KR", Helvetica, Arial, "Segoe UI Emoji";
      background: radial-gradient(1200px 600px at 15% 10%, rgba(90,120,255,.18), transparent 55%),
                  radial-gradient(900px 600px at 80% 0%, rgba(61,220,151,.16), transparent 50%),
                  var(--bg);
      color:var(--text);
    }
    .container{
      max-width: 1100px;
      margin: 40px auto;
      padding: 0 18px 60px;
    }
    header{
      display:flex;
      align-items:flex-end;
      justify-content:space-between;
      gap:16px;
      margin-bottom: 18px;
    }
    h1{
      margin:0;
      font-size: 26px;
      letter-spacing: -0.4px;
    }
    .subtitle{
      margin:8px 0 0;
      color:var(--muted);
      font-size: 14px;
      line-height: 1.5;
    }
    .pill{
      border:1px solid var(--border);
      padding:10px 12px;
      border-radius: 999px;
      color:var(--muted);
      font-size: 12px;
      white-space: nowrap;
      background: rgba(255,255,255,.03);
    }
    .grid{
      display:grid;
      grid-template-columns: 1.05fr .95fr;
      gap: 16px;
    }
    @media (max-width: 920px){
      .grid{ grid-template-columns: 1fr; }
      header{ align-items:flex-start; flex-direction:column; }
      .pill{ white-space: normal; }
    }
    .card{
      background: linear-gradient(180deg, rgba(255,255,255,.05), rgba(255,255,255,.02));
      border: 1px solid var(--border);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      overflow:hidden;
    }
    .card .inner{
      padding: 18px 18px 16px;
    }
    .card h2{
      margin:0 0 10px;
      font-size: 16px;
      letter-spacing: -0.2px;
    }
    .form{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px;
    }
    @media (max-width: 560px){
      .form{ grid-template-columns: 1fr; }
    }
    label{
      display:flex;
      flex-direction:column;
      gap:7px;
      font-size: 13px;
      color: var(--muted);
    }
    .input{
      display:flex;
      align-items:center;
      gap:10px;
      background: rgba(0,0,0,.18);
      border: 1px solid var(--border);
      border-radius: 14px;
      padding: 10px 12px;
    }
    .input input{
      width:100%;
      border:0;
      outline:none;
      background:transparent;
      color: var(--text);
      font-size: 15px;
    }
    .suffix{
      color: var(--muted);
      font-size: 12px;
      padding-left: 8px;
      border-left: 1px solid var(--border);
      white-space:nowrap;
    }
    .actions{
      margin-top: 12px;
      display:flex;
      gap:10px;
      flex-wrap:wrap;
    }
    button{
      border:1px solid var(--border);
      background: rgba(255,255,255,.04);
      color: var(--text);
      padding: 10px 12px;
      border-radius: 12px;
      cursor:pointer;
      font-size: 13px;
    }
    button:hover{ background: rgba(255,255,255,.07); }
    .note{
      margin-top: 12px;
      padding: 12px 12px;
      border-radius: 14px;
      border:1px dashed rgba(255,255,255,.18);
      color: var(--muted);
      font-size: 12px;
      line-height: 1.5;
      background: rgba(0,0,0,.12);
    }

    .results{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap: 16px;
    }
    @media (max-width: 920px){
      .results{ grid-template-columns: 1fr; }
    }
    .optionTitle{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      margin-bottom: 12px;
    }
    .badge{
      font-size: 12px;
      padding: 6px 10px;
      border-radius: 999px;
      border:1px solid var(--border);
      color: var(--muted);
      background: rgba(255,255,255,.03);
    }
    .rows{
      display:flex;
      flex-direction:column;
      gap: 8px;
    }
    .row{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 10px;
      padding: 10px 12px;
      border-radius: 14px;
      background: rgba(0,0,0,.14);
      border: 1px solid rgba(255,255,255,.08);
    }
    .row .k{ color: var(--muted); font-size: 12px; }
    .row .v{ font-size: 14px; }
    .net{
      margin-top: 12px;
      padding: 12px 12px;
      border-radius: 16px;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.03);
      display:flex;
      align-items:flex-end;
      justify-content:space-between;
      gap:10px;
    }
    .net .k{
      color: var(--muted);
      font-size: 12px;
      line-height: 1.4;
    }
    .net .v{
      font-size: 18px;
      font-weight: 700;
      letter-spacing: -0.2px;
    }
    .good{ color: var(--good); }
    .bad{ color: var(--bad); }

    .summary{
      margin-top: 14px;
      padding: 14px 14px;
      border-radius: 16px;
      border:1px solid rgba(255,255,255,.14);
      background: rgba(0,0,0,.16);
      line-height: 1.6;
      color: var(--text);
      font-size: 13px;
    }
    .summary .muted{ color: var(--muted); }

    footer{
      margin-top: 14px;
      color: var(--muted);
      font-size: 12px;
      line-height: 1.5;
    }
    .tiny{
      font-size: 11px;
      color: rgba(145,160,199,.92);
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <div>
        <h1>전세 vs 월세 비교 계산기</h1>
        <p class="subtitle">
          입력한 전세금/보증금을 기준으로 <b>대출 먼저 상환 → 남는 금액 예금 운용</b>을 가정했을 때,
          전세/월세 각각의 <b>월 순현금흐름</b>을 계산합니다.
        </p>
      </div>
      <div class="pill">금리 입력: 연(%) · 이자 계산: 단순 월 환산(연/12)</div>
    </header>

    <div class="grid">
      <!-- INPUT CARD -->
      <section class="card">
        <div class="inner">
          <h2>입력</h2>
          <div class="form">
            <label>
              전세금
              <div class="input">
                <input id="jeonseDeposit" type="text" inputmode="numeric" placeholder="예: 500,000,000" />
                <div class="suffix">원</div>
              </div>
            </label>

            <label>
              월세 보증금
              <div class="input">
                <input id="wolseDeposit" type="text" inputmode="numeric" placeholder="예: 50,000,000" />
                <div class="suffix">원</div>
              </div>
            </label>

            <label>
              월세
              <div class="input">
                <input id="wolseRent" type="text" inputmode="numeric" placeholder="예: 1,500,000" />
                <div class="suffix">원/월</div>
              </div>
            </label>

            <label>
              대출금(잔액)
              <div class="input">
                <input id="loanAmount" type="text" inputmode="numeric" placeholder="예: 200,000,000" />
                <div class="suffix">원</div>
              </div>
            </label>

            <label>
              대출금리
              <div class="input">
                <input id="loanRate" type="number" step="0.01" placeholder="예: 4.2" />
                <div class="suffix">%/년</div>
              </div>
            </label>

            <label>
              예금금리
              <div class="input">
                <input id="depositRate" type="number" step="0.01" placeholder="예: 3.2" />
                <div class="suffix">%/년</div>
              </div>
            </label>
          </div>

          <div class="actions">
            <button id="btnExample" type="button">예시값 채우기</button>
            <button id="btnReset" type="button">초기화</button>
          </div>

          <div class="note">
            <b>해석(요청하신 가정)</b><br/>
            - 전세/월세 각각에서 “전세금(또는 보증금)으로 대출금을 먼저 갚고” 남는 돈을 예금으로 돌린다고 가정합니다.<br/>
            - 남은 대출이 있으면 월 대출이자를 비용으로 잡고, 월세는 월세 비용으로 차감합니다.<br/>
            <span class="tiny">※ 실제 계약에서는 전세금/보증금이 임대인에게 예치되는 구조, 중도상환수수료/세금/대출 조건(원리금/거치) 등 변수가 있어요. 이 계산기는 “현금흐름 비교”에 초점을 둔 단순화 모델입니다.</span>
          </div>
        </div>
      </section>

      <!-- RESULT CARD -->
      <section class="card">
        <div class="inner">
          <h2>결과</h2>

          <div class="results">
            <div class="card" style="box-shadow:none; border-radius:16px;">
              <div class="inner">
                <div class="optionTitle">
                  <div>
                    <div style="font-size:14px; font-weight:700;">전세</div>
                    <div class="tiny">월세 0원 가정</div>
                  </div>
                  <div class="badge" id="badgeJeonse">—</div>
                </div>

                <div class="rows" id="rowsJeonse">
                  <div class="row"><div class="k">대출 상환액</div><div class="v" id="j_repay">—</div></div>
                  <div class="row"><div class="k">남은 대출</div><div class="v" id="j_loanLeft">—</div></div>
                  <div class="row"><div class="k">예금 운용금(남는 금액)</div><div class="v" id="j_cashLeft">—</div></div>
                  <div class="row"><div class="k">월 예금이자</div><div class="v" id="j_depInt">—</div></div>
                  <div class="row"><div class="k">월 대출이자</div><div class="v" id="j_loanInt">—</div></div>
                  <div class="row"><div class="k">월세 비용</div><div class="v" id="j_rent">—</div></div>
                </div>

                <div class="net">
                  <div class="k">월 순현금흐름<br/><span class="tiny">(예금이자 − 대출이자 − 월세)</span></div>
                  <div class="v" id="j_net">—</div>
                </div>
              </div>
            </div>

            <div class="card" style="box-shadow:none; border-radius:16px;">
              <div class="inner">
                <div class="optionTitle">
                  <div>
                    <div style="font-size:14px; font-weight:700;">월세</div>
                    <div class="tiny">입력한 월세 반영</div>
                  </div>
                  <div class="badge" id="badgeWolse">—</div>
                </div>

                <div class="rows" id="rowsWolse">
                  <div class="row"><div class="k">대출 상환액</div><div class="v" id="w_repay">—</div></div>
                  <div class="row"><div class="k">남은 대출</div><div class="v" id="w_loanLeft">—</div></div>
                  <div class="row"><div class="k">예금 운용금(남는 금액)</div><div class="v" id="w_cashLeft">—</div></div>
                  <div class="row"><div class="k">월 예금이자</div><div class="v" id="w_depInt">—</div></div>
                  <div class="row"><div class="k">월 대출이자</div><div class="v" id="w_loanInt">—</div></div>
                  <div class="row"><div class="k">월세 비용</div><div class="v" id="w_rent">—</div></div>
                </div>

                <div class="net">
                  <div class="k">월 순현금흐름<br/><span class="tiny">(예금이자 − 대출이자 − 월세)</span></div>
                  <div class="v" id="w_net">—</div>
                </div>
              </div>
            </div>
          </div>

          <div class="summary" id="summary">
            입력값을 넣으면 여기서 “어느 쪽이 월 기준으로 유리한지” 요약해줄게요.
          </div>

          <footer>
            <div class="tiny">
              계산식: <br/>
              상환액 = min(보증금/전세금, 대출금) · 남은대출 = max(대출금 − 보증금/전세금, 0) · 남는금액 = max(보증금/전세금 − 대출금, 0)<br/>
              월예금이자 = 남는금액 × (예금금리/100) / 12 · 월대출이자 = 남은대출 × (대출금리/100) / 12<br/>
              월순현금흐름 = 월예금이자 − 월대출이자 − 월세
            </div>
          </footer>
        </div>
      </section>
    </div>
  </div>

  <script>
    // ---------- helpers ----------
    const fmt = new Intl.NumberFormat("ko-KR");
    const money = (n) => fmt.format(Math.round(n)) + "원";
    const signedMoney = (n) => (n >= 0 ? "+" : "−") + money(Math.abs(n));
    const clamp0 = (x) => Math.max(0, x);

    function parseMoney(str){
      if(!str) return 0;
      const cleaned = String(str).replace(/[^\d.-]/g, "");
      const n = Number(cleaned);
      return Number.isFinite(n) ? n : 0;
    }
    function formatMoneyInput(el){
      const v = parseMoney(el.value);
      el.value = v ? fmt.format(Math.round(v)) : "";
    }

    // ---------- dom ----------
    const el = {
      jeonseDeposit: document.getElementById("jeonseDeposit"),
      wolseDeposit: document.getElementById("wolseDeposit"),
      wolseRent: document.getElementById("wolseRent"),
      loanAmount: document.getElementById("loanAmount"),
      loanRate: document.getElementById("loanRate"),
      depositRate: document.getElementById("depositRate"),
      btnExample: document.getElementById("btnExample"),
      btnReset: document.getElementById("btnReset"),

      // jeonse outputs
      j_repay: document.getElementById("j_repay"),
      j_loanLeft: document.getElementById("j_loanLeft"),
      j_cashLeft: document.getElementById("j_cashLeft"),
      j_depInt: document.getElementById("j_depInt"),
      j_loanInt: document.getElementById("j_loanInt"),
      j_rent: document.getElementById("j_rent"),
      j_net: document.getElementById("j_net"),
      badgeJeonse: document.getElementById("badgeJeonse"),

      // wolse outputs
      w_repay: document.getElementById("w_repay"),
      w_loanLeft: document.getElementById("w_loanLeft"),
      w_cashLeft: document.getElementById("w_cashLeft"),
      w_depInt: document.getElementById("w_depInt"),
      w_loanInt: document.getElementById("w_loanInt"),
      w_rent: document.getElementById("w_rent"),
      w_net: document.getElementById("w_net"),
      badgeWolse: document.getElementById("badgeWolse"),

      summary: document.getElementById("summary")
    };

    // ---------- core calc ----------
    function calcScenario(depositAmount, monthlyRent, loanAmount, loanRatePct, depositRatePct){
      const repay = Math.min(depositAmount, loanAmount);
      const loanLeft = clamp0(loanAmount - depositAmount);
      const cashLeft = clamp0(depositAmount - loanAmount);

      const loanRate = (loanRatePct || 0) / 100;
      const depRate = (depositRatePct || 0) / 100;

      const depInt = cashLeft * depRate / 12;
      const loanInt = loanLeft * loanRate / 12;

      const net = depInt - loanInt - (monthlyRent || 0);

      return { repay, loanLeft, cashLeft, depInt, loanInt, monthlyRent: (monthlyRent||0), net };
    }

    function render(){
      const J = parseMoney(el.jeonseDeposit.value);
      const Wd = parseMoney(el.wolseDeposit.value);
      const Wr = parseMoney(el.wolseRent.value);
      const L = parseMoney(el.loanAmount.value);

      const loanRatePct = Number(el.loanRate.value || 0);
      const depRatePct = Number(el.depositRate.value || 0);

      const jeonse = calcScenario(J, 0, L, loanRatePct, depRatePct);
      const wolse  = calcScenario(Wd, Wr, L, loanRatePct, depRatePct);

      // write outputs - jeonse
      el.j_repay.textContent = money(jeonse.repay);
      el.j_loanLeft.textContent = money(jeonse.loanLeft);
      el.j_cashLeft.textContent = money(jeonse.cashLeft);
      el.j_depInt.textContent = signedMoney(jeonse.depInt);
      el.j_loanInt.textContent = "−" + money(jeonse.loanInt);
      el.j_rent.textContent = "0원";
      el.j_net.textContent = signedMoney(jeonse.net);
      el.j_net.className = "v " + (jeonse.net >= 0 ? "good" : "bad");
      el.badgeJeonse.textContent = jeonse.net >= 0 ? "월 순수익" : "월 순비용";

      // write outputs - wolse
      el.w_repay.textContent = money(wolse.repay);
      el.w_loanLeft.textContent = money(wolse.loanLeft);
      el.w_cashLeft.textContent = money(wolse.cashLeft);
      el.w_depInt.textContent = signedMoney(wolse.depInt);
      el.w_loanInt.textContent = "−" + money(wolse.loanInt);
      el.w_rent.textContent = "−" + money(wolse.monthlyRent);
      el.w_net.textContent = signedMoney(wolse.net);
      el.w_net.className = "v " + (wolse.net >= 0 ? "good" : "bad");
      el.badgeWolse.textContent = wolse.net >= 0 ? "월 순수익" : "월 순비용";

      // summary
      const diff = jeonse.net - wolse.net; // +면 전세가 더 유리
      const diffAbs = money(Math.abs(diff));
      const best = (diff > 0) ? "전세" : (diff < 0) ? "월세" : "동일";
      const bestText = (best === "동일")
        ? `두 옵션의 월 순현금흐름이 같아요. (차이: 0원)`
        : `${best}가 월 기준으로 더 유리해요. (차이: ${diffAbs})`;

      // detect missing inputs
      const missing = [];
      if(!J) missing.push("전세금");
      if(!Wd) missing.push("월세 보증금");
      if(!Wr) missing.push("월세");
      if(!L) missing.push("대출금");
      if(!loanRatePct) missing.push("대출금리");
      if(!depRatePct) missing.push("예금금리");

      const missingText = missing.length
        ? `<div class="muted">입력 누락: ${missing.join(", ")} (0으로 간주했어요)</div>`
        : "";

      el.summary.innerHTML = `
        <div><b>${bestText}</b></div>
        <div class="muted">
          전세 월순현금흐름: <b>${signedMoney(jeonse.net)}</b> ·
          월세 월순현금흐름: <b>${signedMoney(wolse.net)}</b>
        </div>
        ${missingText}
      `;
    }

    // ---------- wiring ----------
    const moneyInputs = [el.jeonseDeposit, el.wolseDeposit, el.wolseRent, el.loanAmount];
    moneyInputs.forEach(input => {
      input.addEventListener("input", render);
      input.addEventListener("blur", () => { formatMoneyInput(input); render(); });
      input.addEventListener("focus", () => input.select());
    });
    [el.loanRate, el.depositRate].forEach(input => {
      input.addEventListener("input", render);
    });

    el.btnExample.addEventListener("click", () => {
      el.jeonseDeposit.value = "500,000,000";
      el.wolseDeposit.value = "50,000,000";
      el.wolseRent.value = "1,500,000";
      el.loanAmount.value = "200,000,000";
      el.loanRate.value = "4.2";
      el.depositRate.value = "3.2";
      render();
    });

    el.btnReset.addEventListener("click", () => {
      el.jeonseDeposit.value = "";
      el.wolseDeposit.value = "";
      el.wolseRent.value = "";
      el.loanAmount.value = "";
      el.loanRate.value = "";
      el.depositRate.value = "";
      render();
    });

    // initial
    render();
  </script>
</body>
</html>

